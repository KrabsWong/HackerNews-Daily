# =============================================================================
# LLM Provider Configuration
# =============================================================================

# REQUIRED for Worker deployment: Select which LLM provider to use
# Optional for CLI (defaults to "deepseek" if not set)
# Options:
#   - deepseek: Use DeepSeek API directly (requires DEEPSEEK_API_KEY)
#   - openrouter: Use OpenRouter API (requires OPENROUTER_API_KEY)
LLM_PROVIDER=deepseek

# DeepSeek API Key (required if LLM_PROVIDER=deepseek or not set)
# Get your API key from https://platform.deepseek.com/
DEEPSEEK_API_KEY=your_api_key_here

# =============================================================================
# OpenRouter Configuration (only needed if LLM_PROVIDER=openrouter)
# =============================================================================

# OpenRouter API Key (required if LLM_PROVIDER=openrouter)
# Get your API key from https://openrouter.ai/keys
# OPENROUTER_API_KEY=your_openrouter_api_key_here

# Optional: OpenRouter model to use (default: deepseek/deepseek-chat-v3-0324)
# Format: provider/model-name
# Examples:
#   - deepseek/deepseek-chat-v3-0324 (DeepSeek V3 via OpenRouter)
#   - anthropic/claude-3.5-sonnet
#   - openai/gpt-4o
# See https://openrouter.ai/models for available models
# OPENROUTER_MODEL=deepseek/deepseek-chat-v3-0324

# Optional: Your site URL for OpenRouter leaderboard attribution
# This appears in OpenRouter's app rankings
# OPENROUTER_SITE_URL=https://your-site.com

# Optional: Your site name for OpenRouter leaderboard attribution
# OPENROUTER_SITE_NAME=HackerNews Daily

# Optional: Number of stories to fetch (default: 30)
# Maximum supported: 30 stories (for performance and API rate limiting)
# Values above 50 will trigger a warning and be capped at 30
# Note: Actual results may be lower due to time window filtering
HN_STORY_LIMIT=30

# Optional: Time window in hours (default: 24)
# Stories older than this window will be filtered out
# Shorter windows may result in fewer stories (try 48 or 72 for more results)
HN_TIME_WINDOW_HOURS=24

# Optional: Maximum length for AI-generated summaries in characters (default: 300)
# Valid range: 100-500 characters
# Summaries are generated from full article content using AI
SUMMARY_MAX_LENGTH=300

# =============================================================================
# Cache Configuration
# =============================================================================

# Optional: Cache TTL (Time-To-Live) in minutes (default: 30)
# Cached data will be used if it's younger than this value
# Set to a higher value to reduce API calls, lower value for fresher data
CACHE_TTL_MINUTES=30

# Optional: Enable or disable caching (default: true)
# Set to "false" to always fetch fresh data
CACHE_ENABLED=true

# =============================================================================
# Content Filter Configuration
# =============================================================================

# Optional: Enable AI-based content filtering (default: false)
# When enabled, story titles will be classified by AI to filter sensitive content
# This adds 2-5 seconds to fetch time but filters content according to Chinese policies
ENABLE_CONTENT_FILTER=false

# Optional: Content filter sensitivity level (default: medium)
# Options:
#   - low: Only filter explicitly illegal or explicit adult/violent content
#   - medium: Filter political controversies and explicit content (recommended)
#   - high: Broadly filter potentially sensitive topics
CONTENT_FILTER_SENSITIVITY=medium

# =============================================================================
# Crawler API Configuration
# =============================================================================

# Optional: Crawler API base URL for fallback content extraction
# When set, the system will use this crawler service as a fallback when standard
# HTTP requests fail due to anti-crawling mechanisms, JavaScript-rendered content,
# or CAPTCHA challenges. If not set, only standard HTTP extraction will be attempted.
#
# The crawler API improves content extraction success rate by using headless browser
# technology to bypass common anti-crawling protections.
#
# Example: https://tiny-crawl-production.up.railway.app
# Leave empty or comment out to disable crawler fallback (recommended for testing)
#
# Note: Both default fetch and crawler requests have a 10-second timeout and crawler
# is only triggered as last resort when both Readability extraction AND meta description fail.
# CRAWLER_API_URL=
